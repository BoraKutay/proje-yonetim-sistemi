<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
  <meta charset="UTF-8">
  <title>Proje Yönetim Sistemi</title>
  <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
        crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <style>
    .nav-link{
      color: #f8f9fa;
    }
    .avatar{
      color: #fff;
      margin: 0 auto 30px;
      text-align: center;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      z-index: 9;
      background: #6f80c6;
      padding: 15px;
      box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);
      font-size:80%;
    }
  </style>
</head>
<body>

<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0">
  <a class="navbar-brand col-sm-3 col-md-2 mr-0" ></a>
  <ul class="navbar-nav px-3">
    <li class="nav-item text-nowrap">
      <a class="nav-link" th:href="@{/home/logout}">Sign out</a>
    </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-dark sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <div class="follow-ava">
            <img th:src="${userPhoto}" width="80" height="80" style="margin-left: 60px;border-radius: 50%" th:alt="${userMail}">
            <p th:text="${userMail}" style="color: white;margin-left: 10px"></p>
            <td></td>
          </div>
          <li class="nav-item">
            <a class="nav-link active" th:href="@{/home}" >
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
              ANASAYFA <span class="sr-only">(current)</span>
            </a>
          </li>
          <div sec:authorize="hasRole('ADMIN')">
          <li class="nav-item">
            <a class="nav-link" th:href="@{/users}">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
              KULLANICILAR
            </a>
          </li>
          </div>
          <li class="nav-item">
            <a class="nav-link" th:href="@{/partners}">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
              PARTNERLER
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" th:href="@{/countries}">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
              ÜLKELER
            </a>
          </li>
        </ul>

      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"><div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Proje Listesi</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <div sec:authorize="hasRole('ADMIN')">
            <a th:href="@{/showNewProject}" class="btn btn-sm btn-outline-secondary"> Proje Ekle</a>
            </div>
          </div>
        </div>
      </div>
      <div>
        <table border="1" class="table table-striped table-responsive-md">
          <thead>
          <tr>
            <th>Proje Adı</th>
            <th>Proje Kısa İsim</th>
            <th>Proje Çağrısı</th>
            <th>Proje Durumu</th>
            <th>Partner Sayısı </th>
            <div sec:authorize="hasRole('ADMIN')">
            <th>İşlemler</th>
              </div>

          </tr>
          </thead>
          <tbody>


          <tr th:each ="project : ${listProjects}">
            <td th:text="${project.getProjectName()}"> </td>
            <td th:text="${project.getProjectShortName()}"> </td>
            <td th:text="${project.getProjectCall().getProjectCallName()}"></td>
            <td th:text="${project.getStatus().getStatus()}"></td>
            <td th:text="${project.getPartners().size()}"></td>

            <div sec:authorize="hasRole('ADMIN')">
            <td> <a th:href = "@{/updateProject/{id}(id=${project.getProjectID()})}" class="btn btn-primary"> Güncelle </a>
              <a th:href = "@{/deleteProject/{id}(id=${project.getProjectID()})}" class="btn btn-danger"> Sil </a>
            </td>
            </div>
            <td>
              <a th:href = "@{/showProject/{id}(id=${project.getProjectID()})}" class="btn btn-primary"> Detaylı Görüntüle </a>
            </td>
          </tr>


          </tr>

          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>
</body>
</html>